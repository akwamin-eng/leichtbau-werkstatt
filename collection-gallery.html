<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Leichtbau Werkstatt | Gallery</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="icon" type="image/png" sizes="512x512" href="assets/favicon.png" />
    <link rel="apple-touch-icon" sizes="512x512" href="assets/favicon.png" />

    <meta name="description" content="An artistic showcase of precision-restored European performance machines." />
    <link rel="canonical" href="https://leichtbau-werkstatt.com/collection-gallery.html" />
    <meta property="og:title" content="Leichtbau Werkstatt | Gallery" />
    <meta property="og:description"
        content="An artistic showcase of precision-restored European performance machines." />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet" />
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
            cursor: none;
        }

        /* ── Custom cursor ── */
        #cur-dot {
            position: fixed;
            z-index: 9999;
            pointer-events: none;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #FF4D00;
            transform: translate(-50%, -50%);
            transition: width .25s, height .25s;
        }

        #cur-ring {
            position: fixed;
            z-index: 9998;
            pointer-events: none;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            border: 1px solid rgba(255, 77, 0, .45);
            transform: translate(-50%, -50%);
            transition: width .35s cubic-bezier(.23, 1, .32, 1), height .35s cubic-bezier(.23, 1, .32, 1), border-color .25s;
        }

        body.hov #cur-dot {
            width: 12px;
            height: 12px;
        }

        body.hov #cur-ring {
            width: 80px;
            height: 80px;
            border-color: rgba(255, 77, 0, .8);
        }

        /* ── Nav ── */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 300;
            padding: 24px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0, 0, 0, .75) 0%, transparent 100%);
        }

        .nav-side {
            display: flex;
            gap: 36px;
        }

        .nl {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: .25em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, .45);
            text-decoration: none;
            position: relative;
            transition: color .3s;
        }

        .nl::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 1px;
            background: #FF4D00;
            transition: width .3s;
        }

        .nl:hover {
            color: #fff;
        }

        .nl:hover::after {
            width: 100%;
        }

        .nl.active {
            color: #FF4D00;
        }

        .nl.active::after {
            width: 100%;
        }

        /* ── Canvas ── */
        #canvas {
            position: fixed;
            inset: 0;
        }

        /* ── Tile ── */
        .tile {
            position: absolute;
            overflow: visible;
            /* don't clip — preview escapes */
            will-change: transform;
            cursor: none;
        }

        .tile-inner {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        .tile img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            filter: grayscale(100%) brightness(.7);
            transition: filter .7s ease, transform .8s cubic-bezier(.23, 1, .32, 1);
            pointer-events: none;
        }

        .tile:hover .tile-inner img {
            filter: grayscale(80%) brightness(.85);
            transform: scale(1.05);
        }

        /* clip-path reveal */
        .tile {
            opacity: 0;
            clip-path: inset(0 100% 0 0);
        }

        .tile.show {
            opacity: 1;
            transition: clip-path 1.1s cubic-bezier(.76, 0, .24, 1), opacity .1s;
            clip-path: inset(0 0% 0 0);
        }

        /* ── Cursor preview ── */
        #preview {
            position: fixed;
            z-index: 500;
            pointer-events: none;
            width: 440px;
            max-height: 320px;
            overflow: hidden;
            opacity: 0;
            clip-path: inset(50% 50% 50% 50%);
            transition: opacity .35s ease, clip-path .45s cubic-bezier(.76, 0, .24, 1);
            border: 1px solid rgba(255, 255, 255, .08);
            box-shadow: 0 40px 120px rgba(0, 0, 0, .85);
            /* positioned by JS */
        }

        #preview.visible {
            opacity: 1;
            clip-path: inset(0% 0% 0% 0%);
        }

        #preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transform: scale(1.06);
            transition: transform .45s cubic-bezier(.23, 1, .32, 1);
        }

        #preview.visible img {
            transform: scale(1);
        }

        /* ── Counter & index label (inside preview) ── */
        #preview-label {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 10px 14px;
            background: linear-gradient(transparent, rgba(0, 0, 0, .7));
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px;
            letter-spacing: .25em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, .6);
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        #preview-idx {
            color: #FF4D00;
        }

        /* ── Lightbox ── */
        #lb {
            position: fixed;
            inset: 0;
            z-index: 600;
            background: rgba(0, 0, 0, .95);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity .4s ease;
        }

        #lb.open {
            opacity: 1;
            pointer-events: all;
        }

        #lb-img {
            max-width: 88vw;
            max-height: 88vh;
            object-fit: contain;
            opacity: 0;
            transform: scale(.96);
            transition: opacity .4s ease .1s, transform .4s cubic-bezier(.23, 1, .32, 1) .1s;
        }

        #lb.open #lb-img {
            opacity: 1;
            transform: scale(1);
        }

        #lb-close {
            position: absolute;
            top: 28px;
            right: 32px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: .3em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, .4);
            background: none;
            border: none;
            cursor: none;
            transition: color .3s;
        }

        #lb-close:hover {
            color: #FF4D00;
        }

        .lb-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            letter-spacing: .2em;
            background: none;
            border: 1px solid rgba(255, 255, 255, .12);
            color: rgba(255, 255, 255, .4);
            padding: 16px 22px;
            cursor: none;
            transition: color .3s, border-color .3s, background .3s;
        }

        .lb-nav:hover {
            color: #fff;
            border-color: #FF4D00;
            background: rgba(255, 77, 0, .1);
        }

        #lb-prev {
            left: 32px;
        }

        #lb-next {
            right: 32px;
        }

        #lb-counter {
            position: absolute;
            bottom: 32px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            letter-spacing: .4em;
            color: rgba(255, 255, 255, .3);
        }

        #lb-counter span {
            color: #FF4D00;
        }

        /* ── Hint ── */
        #hint {
            position: fixed;
            bottom: 28px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Space Grotesk', sans-serif;
            font-size: 9px;
            letter-spacing: .5em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, .2);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            animation: fadein 1s ease 3.5s both;
            transition: opacity .5s ease;
        }

        #hint.gone {
            opacity: 0;
        }

        #hint-bar {
            width: 1px;
            height: 36px;
            background: linear-gradient(#FF4D00, transparent);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: .35;
            }

            50% {
                opacity: 1;
            }
        }

        @keyframes fadein {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* ── Veil ── */
        #veil {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity .8s ease;
        }

        #veil.gone {
            opacity: 0;
            pointer-events: none;
        }

        .veil-logo {
            height: 56px;
            filter: none;
            opacity: 0;
            animation: fadein .6s ease .3s both;
        }
    </style>
</head>

<body>

    <!-- Veil -->
    <div id="veil">
        <img class="veil-logo" src="assets/logo-white.png" alt="" />
    </div>

    <!-- Cursor -->
    <div id="cur-dot"></div>
    <div id="cur-ring"></div>

    <!-- Nav -->
    <nav>
        <div class="nav-side">
            <a class="nl" href="index.html#services">Services</a>
            <a class="nl" href="parts.html">Parts</a>
        </div>
        <a href="index.html">
            <img src="assets/logo-white.png" alt="LW" style="height:52px;width:auto;filter:none;" />
        </a>
        <div class="nav-side">
            <a class="nl active" href="collection-gallery.html">Gallery</a>
            <a class="nl" href="contact.html">Connect</a>
        </div>
    </nav>

    <!-- Canvas -->
    <div id="canvas"></div>

    <!-- Hover preview -->
    <div id="preview">
        <img id="preview-img" src="" alt="" />
        <div id="preview-label">
            <span id="preview-title">—</span>
            <span id="preview-idx">01</span>
        </div>
    </div>

    <!-- Lightbox -->
    <div id="lb" role="dialog" aria-modal="true">
        <button id="lb-close">Close ✕</button>
        <button class="lb-nav" id="lb-prev">← Prev</button>
        <img id="lb-img" src="" alt="" />
        <button class="lb-nav" id="lb-next">Next →</button>
        <div id="lb-counter"><span id="lb-cur">1</span> / <span id="lb-tot">1</span></div>
    </div>

    <!-- Hint -->
    <div id="hint">
        <div id="hint-bar"></div>
        <span>Hover · Click to expand</span>
    </div>

    <script>
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        //  PHOTOS  — add as many as you like here
        //  { src, thumb (optional, defaults to src), title, x(vw), y(vh), w(vw), h(vh), depth, rot }
        //  To auto-scatter: leave x/y undefined and use layout() below
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        const PHOTOS = [
            { src: 'https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=1800&q=90', title: 'Porsche 911 Classic', x: 5, y: 10, w: 35, h: 50, depth: .14, rot: -1.5 },
            { src: 'https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?w=1600&q=90', title: 'BMW M3 E30', x: 44, y: 4, w: 44, h: 29, depth: .3, rot: 1.0 },
            { src: 'https://images.unsplash.com/photo-1588258219511-64eb629cb833?w=1200&q=90', title: 'Porsche Detail', x: 70, y: 35, w: 23, h: 38, depth: .5, rot: 2.2 },
            { src: 'https://images.unsplash.com/photo-1469285994282-454cbe0bd05a?w=1400&q=90', title: 'Lancia Delta', x: 2, y: 68, w: 30, h: 29, depth: .22, rot: -0.8 },
            { src: 'https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=1200&q=90', title: 'Interior Study', x: 38, y: 44, w: 18, h: 22, depth: .6, rot: -2.5 },
            { src: 'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=1600&q=90', title: 'Ferrari Silhouette', x: 27, y: 70, w: 36, h: 27, depth: .2, rot: 1.2 },
            { src: 'https://images.unsplash.com/photo-1579789723621-9d743a4ffe8a?w=1200&q=90', title: 'Vintage Dashboard', x: 81, y: 66, w: 16, h: 31, depth: .7, rot: -3.0 },
            { src: 'https://images.unsplash.com/photo-1541899481282-d53bffe3c35d?w=1400&q=90', title: 'Road Silhouette', x: -2, y: 32, w: 21, h: 35, depth: .08, rot: 0.5 },
            { src: 'https://images.unsplash.com/photo-1568772585407-9361f9bf3a87?w=1200&q=90', title: 'Wheel Detail', x: 47, y: 36, w: 13, h: 16, depth: .8, rot: 4.0 },
            { src: 'https://images.unsplash.com/photo-1580273916550-e323be2ae537?w=1400&q=90', title: 'BMW M4 Competition', x: 56, y: 60, w: 28, h: 20, depth: .35, rot: -1.8 },
            { src: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=1200&q=90', title: 'Suspension Work', x: 20, y: 38, w: 16, h: 28, depth: .55, rot: 1.8 },
            { src: 'https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?w=1600&q=90', title: 'Alpine A110', x: 88, y: 14, w: 18, h: 28, depth: .42, rot: -2.0 },
        ];

        // Animation variants cycle
        const ANIMS = ['anim-l', 'anim-r', 'anim-d', 'anim-u'];

        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        //  BUILD TILES
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        const canvas = document.getElementById('canvas');
        const tileEls = [];

        PHOTOS.forEach((p, i) => {
            const tile = document.createElement('div');
            tile.className = 'tile';
            tile.style.cssText = [
                `left:${p.x}vw`, `top:${p.y}vh`,
                `width:${p.w}vw`, `height:${p.h}vh`,
                `transform:rotate(${p.rot}deg)`,
                `z-index:${Math.round(p.depth * 10) + 1}`
            ].join(';');
            tile.dataset.depth = p.depth;
            tile.dataset.baseRot = p.rot;
            tile.dataset.idx = i;

            const inner = document.createElement('div');
            inner.className = 'tile-inner';

            const img = document.createElement('img');
            img.src = p.src;
            img.alt = p.title;
            img.loading = 'eager';

            inner.appendChild(img);
            tile.appendChild(inner);
            canvas.appendChild(tile);
            tileEls.push(tile);
        });

        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        //  REVEAL SEQUENCE
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        let loaded = 0;
        tileEls.forEach(el => {
            const img = el.querySelector('img');
            const done = () => { if (++loaded >= PHOTOS.length) begin(); };
            if (img.complete) done(); else { img.onload = done; img.onerror = done; }
        });
        setTimeout(begin, 2800);

        let begun = false;
        function begin() {
            if (begun) return; begun = true;
            const veil = document.getElementById('veil');
            veil.classList.add('gone');
            setTimeout(() => {
                veil.remove();
                tileEls.forEach((el, i) => {
                    setTimeout(() => el.classList.add('show'), i * 90);
                });
            }, 820);
        }

        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        //  MOUSE TRACKING — smooth lerp
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        let rawX = innerWidth / 2, rawY = innerHeight / 2;
        let curX = rawX, curY = rawY;
        // Preview position (faster lerp for responsiveness)
        let pvX = rawX, pvY = rawY;

        document.addEventListener('mousemove', e => {
            rawX = e.clientX; rawY = e.clientY;
            document.getElementById('cur-dot').style.cssText = `left:${e.clientX}px;top:${e.clientY}px`;
            document.getElementById('cur-ring').style.cssText = `left:${e.clientX}px;top:${e.clientY}px`;
        });

        const MAX_SHIFT = 65;

        function raf() {
            curX += (rawX - curX) * .065;
            curY += (rawY - curY) * .065;
            pvX += (rawX - pvX) * .14;
            pvY += (rawY - pvY) * .14;

            const cx = innerWidth / 2, cy = innerHeight / 2;
            const nx = (curX - cx) / cx, ny = (curY - cy) / cy;

            tileEls.forEach(el => {
                const d = +el.dataset.depth;
                const br = +el.dataset.baseRot;
                const tx = nx * MAX_SHIFT * d;
                const ty = ny * MAX_SHIFT * d;
                const tlt = nx * d * 1.6;
                el.style.transform = `translate(${tx}px,${ty}px) rotate(${br + tlt}deg)`;
            });

            // Move preview near cursor
            if (previewVisible) {
                positionPreview(pvX, pvY);
            }

            requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        //  HOVER PREVIEW — floats near cursor, never cut off
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        const preview = document.getElementById('preview');
        const pvImg = document.getElementById('preview-img');
        const pvTitle = document.getElementById('preview-title');
        const pvIdx = document.getElementById('preview-idx');
        let previewVisible = false;
        let pvHideTimer;

        const PV_W = 440, PV_H = 320, PV_OFFSET = 32;

        function positionPreview(mx, my) {
            let left = mx + PV_OFFSET;
            let top = my - PV_H / 2;
            // Clamp so it stays inside viewport
            if (left + PV_W > innerWidth - 8) left = mx - PV_W - PV_OFFSET;
            if (top < 8) top = 8;
            if (top + PV_H > innerHeight - 8) top = innerHeight - PV_H - 8;
            preview.style.left = left + 'px';
            preview.style.top = top + 'px';
            preview.style.width = PV_W + 'px';
            preview.style.height = PV_H + 'px';
        }

        function showPreview(idx, mx, my) {
            clearTimeout(pvHideTimer);
            const p = PHOTOS[idx];
            pvImg.src = p.src;
            pvTitle.textContent = p.title;
            pvIdx.textContent = String(idx + 1).padStart(2, '0') + ' / ' + String(PHOTOS.length).padStart(2, '0');
            positionPreview(mx, my);
            preview.classList.add('visible');
            previewVisible = true;
            document.body.classList.add('hov');
        }

        function hidePreview() {
            pvHideTimer = setTimeout(() => {
                preview.classList.remove('visible');
                previewVisible = false;
                document.body.classList.remove('hov');
            }, 80);
        }

        tileEls.forEach(el => {
            el.addEventListener('mouseenter', e => showPreview(+el.dataset.idx, e.clientX, e.clientY));
            el.addEventListener('mouseleave', hidePreview);
            el.addEventListener('click', () => openLightbox(+el.dataset.idx));
        });

        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        //  LIGHTBOX
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        const lb = document.getElementById('lb');
        const lbImg = document.getElementById('lb-img');
        const lbCur = document.getElementById('lb-cur');
        const lbTot = document.getElementById('lb-tot');
        let lbIdx = 0;

        lbTot.textContent = PHOTOS.length;

        function openLightbox(idx) {
            hidePreview();
            lbIdx = ((idx % PHOTOS.length) + PHOTOS.length) % PHOTOS.length;
            lbImg.src = PHOTOS[lbIdx].src;
            lbImg.alt = PHOTOS[lbIdx].title;
            lbCur.textContent = lbIdx + 1;
            lb.classList.add('open');
            document.body.style.overflow = 'hidden';
        }
        function closeLightbox() {
            lb.classList.remove('open');
            document.body.style.overflow = '';
        }
        function lbStep(delta) {
            lbImg.style.opacity = 0;
            lbImg.style.transform = `translateX(${delta > 0 ? 40 : -40}px)`;
            setTimeout(() => {
                lbIdx = ((lbIdx + delta) % PHOTOS.length + PHOTOS.length) % PHOTOS.length;
                lbImg.src = PHOTOS[lbIdx].src;
                lbCur.textContent = lbIdx + 1;
                lbImg.style.transition = 'none';
                lbImg.style.opacity = 0;
                lbImg.style.transform = `translateX(${delta > 0 ? -40 : 40}px)`;
                requestAnimationFrame(() => {
                    lbImg.style.transition = '';
                    lbImg.style.opacity = '';
                    lbImg.style.transform = '';
                });
            }, 220);
        }

        document.getElementById('lb-close').addEventListener('click', closeLightbox);
        document.getElementById('lb-prev').addEventListener('click', () => lbStep(-1));
        document.getElementById('lb-next').addEventListener('click', () => lbStep(+1));
        lb.addEventListener('click', e => { if (e.target === lb) closeLightbox(); });
        document.addEventListener('keydown', e => {
            if (!lb.classList.contains('open')) return;
            if (e.key === 'ArrowLeft') lbStep(-1);
            if (e.key === 'ArrowRight') lbStep(+1);
            if (e.key === 'Escape') closeLightbox();
        });

        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        //  HINT
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        document.addEventListener('mousemove', () => {
            document.getElementById('hint').classList.add('gone');
        }, { once: true });
    </script>
</body>

</html>